---
title: apk内部存储路径
comments: true
date: 2017-01-07 18:04:21
tags:
- cocos2dx
categories:
- cocos2dx
---

首先内部存储路径为/data/data/youPackageName/，下面讲解的各路径都是基于你自己的应用的内部存储路径下。所有内部存储中保存的文件在用户卸载应用的时候会被删除。

#### files

1. Context.getFilesDir()，该方法返回/data/data/youPackageName/files的File对象。

2. Context.openFileInput()与Context.openFileOutput()，只能读取和写入files下的文件，返回的是FileInputStream和FileOutputStream对象。

3. Context.fileList()，返回files下所有的文件名，返回的是String[]对象。

4. Context.deleteFile(String)，删除files下指定名称的文件。

 

#### cache

Context.getCacheDir()，该方法返回/data/data/youPackageName/cache的File对象。

 

#### custom dir

getDir(String name, int mode)，返回/data/data/youPackageName/下的指定名称的文件夹File对象，如果该文件夹不存在则用指定名称创建一个新的文件夹。



一些路径的标准写法

 Environment.getDataDirectory() = /data

 Environment.getDownloadCacheDirectory() = /cache

 Environment.getExternalStorageDirectory() = /mnt/sdcard

 Environment.getRootDirectory() = /system

 context.getCacheDir() = /data/data/com.mt.mtpp/cache

 context.getExternalCacheDir() = /mnt/sdcard/Android/data/com.mt.mtpp/cache

 context.getFilesDir() = /data/data/com.mt.mtpp/files



使用adb查看apk内存储数据：【手机有root权限】



adb shell

su -

cd data/data/airfight.dawx.com/

ls

下面包含了四个文件见  files  cache  lib database



使用adb获取数据：

adb push D:\file.txt system/

adb pull system/file.txt D:/



\------------------------------------------------------------------------------

apk的安装卸载流程：

应用安装涉及到如下几个目录：

system/app 

 系统自带的应用程序，无法删除

 

data/app

 用户程序安装的目录，有删除权限。

安装时把apk文件复制到此目录

 

data/data

 存放应用程序的数据

 

Data/dalvik-cache

 将apk中的dex文件安装到dalvik-cache目录下(dex文件是dalvik虚拟机的可执行文件,其大小约为原始apk文件大小的四分之一)



 安装过程：复制APK安装包到data/app目录下，解压并扫描安装包，把dex文件(Dalvik字节码)保存到dalvik-cache目录，并data/data目录下创建对应的应用数据目录。

卸载过程：删除安装过程中在上述三个目录下创建的文件及目录