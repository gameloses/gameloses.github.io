---
title: git重点用法
comments: true
date: 2018-12-05 13:46:52
tags:
- git
categories:
- git
excerpt: 涉及git工作流程,实用方法.分支合并回滚子模块等.注重实践中常用的方法流程,同时对原理稍作注解.git的实践说明书.
---
#### 流程
{% asset_img gitflow.png git flow %}
Workspace：工作区
Index / Stage：暂存区
Repository：仓库区（或本地仓库）
Remote：远程仓库
#### 基本操作
- 放入暂存区
  `git add .`
  `git add file`

- 提交到仓库
  `git commit -m 'log'`

- 撤销工作区修改
  `git checkout -- file`
  `git checkout .`

- 暂存区回退到工作区
  `git reset HEAD file`

- Reset回退commit
  回滚commit,工作区暂存区也改变
  `git reset --hard  commitid`
  只回滚commit,工作区暂存区代码没有改变
  `git reset --soft commitid`
  回滚commit,暂存区改变,工作区不变
  `git reset -mixed commitid` 等同 `git reset commitid`

- revert回退commit

  `git revert commit`

  但是会生成一次新的提交，需要填写提交注释，以前的历史记录都在.

  而reset是指将HEAD指针指到指定提交,历史记录中不会出现放弃的提交记录.

- commit id查看
  `git log`
  `git reflog`

- git push
  `git push <远程主机名> <本地分支名>:<远程分支名>`
  推送本地master分支到远程origin主机的master分支，后者不存在就创建
  `git push origin master` 省略了远程分支名

- git pull
  `git pull <远程主机名> <远程分支名>:<本地分支名>`
  远程主机origin的master分支拉取过来，与本地的brantest分支合并:
  `git pull origin master:brantest`
  将远程origin主机的master分支拉取过来和本地的当前分支进行合并
  `git pull origin master`
#### 远程操作
- 本地代码回滚到commitid
`git reset --hard commitid`
- 远程代码回回滚
  方法1：
  回滚后强制推送本地到远程
  `git reset --hard commitid`
  `git push origin branch -f`
  方法2：
  且分支在分支上reset然后删除远程分支，使用本地分支重新远程分支
  ```
  git checkout the_branch
  git branch bk
  git pull
  git reset --hard th_commit_id
  git push origin :the_branch 删除远程then_branch
  git push origin the_branch
  ```

#### 特殊操作

- 删除某次提交

  `git rebase -i commitid `

- 修改某次提交

  git rebase -i commitid